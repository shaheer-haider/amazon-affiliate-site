import{_ as $e}from"./Navbar.vue.6fef9034.js";import{g as K,r as L,o,c as u,h as c,w as h,a as d,n as E,q as e,b0 as J,t as S,s as w,d as N,S as Ve,ad as Te,e as Re,a1 as z,F as U,m as O,P as ee,at as Se,l as v,b as x,J as ie,j as de,E as ce,V as Ue,ai as re,T as we,al as je,a6 as qe,I as W,ah as Ne,b1 as Ee,b2 as Pe,Z as Le,b3 as Ie,a8 as Be}from"./entry.11fe2cd7.js";import{_ as pe}from"./Badge.01153451.js";import{_ as me}from"./NSelect.vue.80dc04cd.js";import{_ as Oe}from"./CodeSnippets.vue.62990bc2.js";import{_ as Me}from"./NCheckbox.vue.09c2faa0.js";import{_ as fe}from"./NPanelGrids.16564aae.js";import{_ as De}from"./NCodeBlock.vue.5e6a2196.js";import{C as ue}from"./constants.d7bcda3c.js";import{U as Fe}from"./json-editor-vue.51bb18e8.js";import{_ as Ae}from"./PanelLeftRight.vue.17bcbe2c.js";import"./client.853ad100.js";const We=d("div",{"x-divider":""},null,-1),he=K({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(A){const j=L(!0);return(n,k)=>{const a=ee,$=pe,V=he;return o(),u("div",null,[(o(),c(Te(n.item.routes?"button":e(Re)),{flex:"~ gap-2","w-full":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:E([{"bg-active":n.$route.query.path===n.item.route&&n.$route.query.method===n.item.method}]),style:Ve({paddingLeft:`calc(0.5rem + ${n.index*1.5}em)`}),to:{query:{path:n.item.route,method:n.item.method}},onClick:k[0]||(k[0]=P=>j.value=!e(j))},{default:h(()=>[d("div",{class:E({"w-12":!n.item.routes}),"flex-none":"","text-left":""},[n.item.type==="collection"?(o(),c(a,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(j)?90:0,transition:""},null,8,["transform-rotate"])):(o(),c($,{key:1,class:E(("getRequestMethodClass"in n?n.getRequestMethodClass:e(J))(n.item.method||"*")),textContent:S((n.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),d("span",{class:E({"flex items-center":n.item.routes}),"flex-auto":"","text-sm":"","font-mono":""},[n.item.type==="collection"?(o(),c(a,{key:0,title:`${n.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):w("",!0),N(" "+S(n.item.route),1)],2)]),_:1},8,["class","style","to"])),We,e(j)?z(n.$slots,"default",{key:0},()=>[(o(!0),u(U,null,O(n.item.routes,P=>(o(),c(V,{key:P.filepath,item:P,index:n.index+1},null,8,["item","index"]))),128))]):w("",!0)])}}}),Ge={p4:"",flex:"~ col gap-4"},He={key:1,ml2:"",flex:""},Je=["value"],ze={flex:"","gap-4":""},Ke=d("div",{"flex-auto":""},null,-1),Qe=K({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},exclude:{default:()=>[]}},setup(A,{emit:j}){const n=A,k=Se(n,"modelValue",j,{passive:!0}),a=v(()=>[...[...n.keys,"key","value","type"].filter(p=>!n.exclude.includes(p))]),$=v(()=>{const i={};for(const p of a.value)i[p]=n.default[p]||"";return i}),V=["string","number","boolean","file","date","time","datetime-local"];function P(i,p){const q=p.target;if(q.files&&q.files[0]){const _=q.files[0],b=new FileReader;b.readAsDataURL(_),b.onload=()=>{k[i].value=b.result}}}return(i,p)=>{const q=ie,_=Me,b=me,C=ee,y=de;return o(),u("div",Ge,[(o(!0),u(U,null,O(e(k),(s,m)=>(o(),u("div",{key:m,flex:"~ gap-2","justify-around":""},[z(i.$slots,"input",{item:s}),(o(!0),u(U,null,O(e(a),g=>(o(),u(U,{key:g},[s?.type!==null&&g==="key"?(o(),c(q,{key:0,modelValue:s[g],"onUpdate:modelValue":T=>s[g]=T,placeholder:g,"flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):g!=="type"?(o(),u(U,{key:1},[s.type==="file"?(o(),c(q,{key:0,type:"file",onChange:T=>P(m,T)},null,8,["onChange"])):s.type==="boolean"?(o(),u("div",He,[x(_,{modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,placeholder:"Value",n:"green lg"},null,8,["modelValue","onUpdate:modelValue"])])):(o(),c(q,{key:2,modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,type:s.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue","type"]))],64)):g==="type"?(o(),c(b,{key:2,modelValue:s.type,"onUpdate:modelValue":T=>s.type=T,n:"sm green"},{default:h(()=>[(o(),u(U,null,O(V,T=>d("option",{key:T,value:T},S(T),9,Je)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):w("",!0)],64))),128)),z(i.$slots,"input-actions",{},()=>[x(y,{n:"red",onClick:g=>e(k).splice(m,1)},{default:h(()=>[x(C,{icon:"carbon:delete"})]),_:2},1032,["onClick"])])]))),128)),d("div",ze,[z(i.$slots,"actions",{params:e(k)},()=>[x(y,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:p[0]||(p[0]=s=>e(k).push({...e($)}))},{default:h(()=>[N(" Add ")]),_:1}),Ke,e(k).length?(o(),c(y,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:p[1]||(p[1]=s=>k.value=[])},{default:h(()=>[N(" Remove All ")]),_:1})):w("",!0)])])])}}}),Ze={"h-full":"","w-full":"",flex:"~ col"},Xe={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},Ye={flex:"~ gap2"},et={flex:"~ gap2","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},tt=d("div",{"flex-auto":""},null,-1),ot={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},nt={"text-right":"","font-mono":""},st={key:1,relative:""},lt={key:2,relative:"","n-code-block":"",border:"b base"},at={flex:"~ wrap","w-full":""},rt=["onClick"],ut=d("div",{border:"b base","flex-auto":""},null,-1),it={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},dt=d("div",null,"Response",-1),ct={key:1,"text-xs":"",op50:""},pt=d("div",{"flex-auto":""},null,-1),mt=d("div",{op50:""}," Request finished in ",-1),ft={key:0,"flex-auto":"","overflow-auto":""},ht={border:"~ base","h-full":"","w-full":"",rounded:""},vt=["data"],_t={key:2,"flex-auto":"","overflow-auto":"",p4:""},yt={border:"~ base",rounded:""},gt=["src"],bt={key:1,controls:"",rounded:""},kt=["src"],Ct=K({__name:"ServerRouteDetails",props:{route:{}},setup(A){const j=A,n=ce(),k=Ue(),a=re({contentType:"text/plain",data:"",statusCode:200,error:void 0}),$=v(()=>a.contentType.includes("application/json")?"json":a.contentType.includes("text/html")?"html":a.contentType.includes("text/css")?"css":a.contentType.includes("text/javascript")?"javascript":a.contentType.includes("image")||a.contentType.includes("video")?"media":a.contentType.includes("text/xml")||a.contentType.includes("application/xml")?"xml":a.contentType.includes("application/pdf")?"pdf":"text"),V=v(()=>{if($.value==="json")return JSON.stringify(a.data,null,2);if($.value==="media"||$.value==="pdf"){const t=new Blob([a.data],{type:a.contentType});return URL.createObjectURL(t)}return a.data}),P=L(0),i=L(!1),p=L(!1),q=we(),_=v(()=>j.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),b=v(()=>_.value?.filter(t=>t.startsWith(":")||t.startsWith("**:"))||[]),C=L(j.route.method||"GET"),y=L({}),s=re({query:[{key:"",value:"",type:"string"}],body:[{key:"",value:"",type:"string"}],headers:[{key:"Content-Type",value:"application/json",type:"string"}]}),m=L({}),g=["GET","POST","PUT","PATCH","DELETE","HEAD"],T=["PATCH","POST","PUT","DELETE"],te=v(()=>T.includes(C.value.toUpperCase())),D=L(n.query.tab?n.query.tab:b.value.length?"params":"query"),oe=["input","json"],F=L(oe[0]),I=v({get:()=>s[D.value],set:t=>{s[D.value]=t}}),ne=v(()=>({...Z(s.query)})),ve=v(()=>({...Z(s.headers)})),Q=v(()=>te.value?F.value==="json"?m.value:{...Z(s.body)}:void 0),_e=v(()=>{let t=k.value?.devServer.url||"http://localhost";t.charAt(t.length-1)==="/"&&(t=t.slice(0,-1));const l=k.value?.devServer.port||3e3;return t.includes(`:${l}`)?t:`${t}:${l}`}),G=v(()=>{let t=new URLSearchParams(ne.value).toString();t&&(t=`?${t}`);const l=(_.value?.map(R=>(R.startsWith(":")||R.startsWith("**:"))&&y.value[R]||R).join("")||"")+t;let f=k.value?.app.baseURL||"";return(f==="./"||f===".")&&(f=""),f.endsWith("/")&&(f=f.slice(0,-1)),f+l}),ye=v(()=>_e.value+G.value);function Z(t){const l=Object.fromEntries(t.filter(({key:f,value:R})=>f&&R).map(({key:f,value:R})=>[f,R]));return Object.entries(l).length?l:void 0}async function se(){p.value=!0,i.value=!0,Object.assign(a,{lang:"text",contentType:"",data:"",error:void 0});const t=Date.now();try{a.data=await $fetch(ye.value,{method:C.value.toUpperCase(),headers:ve.value,query:ne.value,body:Q.value,onResponse({response:l}){a.contentType=(l.headers.get("content-type")||"").toString().toLowerCase().trim(),a.statusCode=l.status},onResponseError(l){a.error=l.response._data,a.data=l.response._data}})}catch{}i.value=!1,P.value=Date.now()-t}const le=v(()=>{const t=[],l=[],f=s.headers.filter(({key:B,value:M})=>B&&M&&!(B==="Content-Type"&&M==="application/json")).map(({key:B,value:M})=>`  '${B}': '${M}'`).join(`,
`);C.value.toUpperCase()!=="GET"&&l.push(`method: '${C.value.toUpperCase()}'`),f&&l.push(`headers: {
${f}
}`),Q.value&&l.push(`body: ${JSON.stringify(Q.value,null,2)}`);const R=l.length?`, {
${l.join(`,
`).split(`
`).map(B=>`  ${B}`).join(`
`)}
}`:"";return t.push({name:"useFetch",lang:"javascript",docs:ue.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${G.value}'${R})`}),t.push({name:"$fetch",lang:"javascript",docs:ue.nuxt.$fetch,code:`await $fetch('${G.value}'${R})`}),t}),ge=v(()=>{const t=[];return b.value.length&&t.push({name:"Params",slug:"params",icon:"carbon-text-selection",length:b.value.length}),t.push({name:"Query",slug:"query",icon:"carbon-help",length:s.query.length}),te.value&&t.push({name:"Body",slug:"body",icon:"carbon-document",length:s.body.length}),t.push({name:"Headers",slug:"headers",icon:"carbon-html-reference",length:s.headers.length}),t.push({name:"Snippets",slug:"snippet",icon:"carbon-code"}),t});je(()=>{F.value==="json"&&typeof m.value=="string"&&(m.value=JSON.parse(m.value))});const H=[];return qe(I.value,()=>{I.value?.forEach((t,l)=>{H.length?H[l]!==t.type&&t.type!==void 0&&(H[l]=t.type,t.type!=="string"?t.type==="boolean"&&typeof t.value!="boolean"?t.value=!0:t.type==="number"&&typeof t.value!="number"?t.value=0:t.value="":t.type==="string"&&(t.value=t.value.toString())):H[l]=t.type??"string"})},{immediate:!0}),(t,l)=>{const f=de,R=me,B=ie,M=ee,be=Oe,ae=Qe,ke=fe,Ce=Ee,X=pe,xe=De;return o(),u("div",Ze,[d("div",Xe,[d("div",Ye,[t.route.method?(o(),c(f,{key:0,class:E(("getRequestMethodClass"in t?t.getRequestMethodClass:e(J))(e(C))),"pointer-events-none":"",tabindex:"-1"},{default:h(()=>[N(S(e(C).toUpperCase()),1)]),_:1},8,["class"])):(o(),c(R,{key:1,modelValue:e(C),"onUpdate:modelValue":l[0]||(l[0]=r=>W(C)?C.value=r:null),class:E(("getRequestMethodClass"in t?t.getRequestMethodClass:e(J))(e(C)))},{default:h(()=>[(o(),u(U,null,O(g,r=>d("option",{key:r,class:E(("getRequestMethodClass"in t?t.getRequestMethodClass:e(J))(r))},S(r.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),x(B,{"model-value":e(G),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),x(f,{n:"primary solid",onClick:se},{default:h(()=>[x(M,{icon:"carbon:send"})]),_:1})])]),d("div",et,[(o(!0),u(U,null,O(e(ge),r=>(o(),c(f,{key:r.slug,class:E(e(D)===r.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Y=>D.value=r.slug},{default:h(()=>[x(M,{icon:r.icon},null,8,["icon"]),N(" "+S(r.name)+" "+S(r?.length?`(${r.length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),tt,x(f,{icon:"carbon-launch",onClick:l[1]||(l[1]=r=>e(q)(t.route.filepath))},{default:h(()=>[N(" Open in Editor ")]),_:1})]),e(D)==="params"?(o(),u("div",ot,[(o(!0),u(U,null,O(e(b),r=>(o(),u(U,{key:r},[d("div",nt,S(r),1),x(B,{modelValue:e(y)[r],"onUpdate:modelValue":Y=>e(y)[r]=Y,placeholder:r,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):w("",!0),e(D)==="snippet"?(o(),u("div",st,[e(le).length?(o(),c(be,{key:0,border:"b base","code-snippets":e(le)},null,8,["code-snippets"])):w("",!0)])):e(I)?(o(),u("div",lt,[e(D)==="body"?(o(),u(U,{key:0},[d("div",at,[(o(),u(U,null,O(oe,r=>d("button",{key:r,px4:"",py2:"",border:"r base",hover:"bg-active",class:E({"border-b":r!==e(F)}),onClick:Y=>F.value=r},[d("div",{class:E({op30:r!==e(F)}),"font-mono":""},S(r),3)],10,rt)),64)),ut]),e(F)==="input"?(o(),c(ae,{key:0,modelValue:e(I),"onUpdate:modelValue":l[2]||(l[2]=r=>W(I)?I.value=r:null),default:{type:"string"}},null,8,["modelValue"])):e(F)==="json"?(o(),c(e(Fe),Ne({key:1,modelValue:e(m),"onUpdate:modelValue":l[3]||(l[3]=r=>W(m)?m.value=r:null),class:[[t.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},t.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):w("",!0)],64)):(o(),c(ae,{key:1,modelValue:e(I),"onUpdate:modelValue":l[4]||(l[4]=r=>W(I)?I.value=r:null),default:{type:"string"}},null,8,["modelValue"]))])):w("",!0),e(p)?e(i)?(o(),c(Ce,{key:4,"z-10":"","flex-auto":"","backdrop-blur":""},{default:h(()=>[N(" Fetching... ")]),_:1})):(o(),u(U,{key:5},[d("div",it,[dt,e(a).error?(o(),c(X,{key:0,"bg-red-400:10":"","text-red-400":""},{default:h(()=>[N(" Error ")]),_:1})):w("",!0),x(X,{class:E({"bg-orange-400:10 text-orange-400":e(a).error,"bg-green-400:10 text-green-400":!e(a).error})},{default:h(()=>[N(S(e(a).statusCode),1)]),_:1},8,["class"]),e(a).contentType?(o(),u("code",ct,S(e(a).contentType),1)):w("",!0),pt,mt,x(X,{"bg-green-400:10":"","text-green-400":""},{default:h(()=>[N(S(e(P))+" ms ",1)]),_:1})]),e($)==="pdf"?(o(),u("div",ft,[d("div",ht,[d("object",{data:e(V),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,vt)])])):e($)!=="media"?(o(),c(xe,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(V),lang:e($)},null,8,["code","lang"])):(o(),u("div",_t,[d("div",yt,[e(a).contentType.includes("image")?(o(),u("img",{key:0,rounded:"",src:e(V)},null,8,gt)):(o(),u("video",bt,[d("source",{src:e(V),type:"video/mp4"},null,8,kt)]))])]))],64)):(o(),c(ke,{key:3},{default:h(()=>[x(f,{n:"primary",onClick:se},{default:h(()=>[x(M,{icon:"carbon:send"}),N(" Send request ")]),_:1})]),_:1}))])}}}),xt={flex:"~ gap1","text-sm":""},$t={key:0,op50:""},Vt={op50:""},Tt=d("span",{op75:""},"Select a route to start",-1),Ot=K({__name:"server-routes",setup(A){const j=ce(),n=Pe(),k=v(()=>{const i=[],p=(_,b)=>{_.routes=_.routes||[],_.routes.push(b)};return n.value?.forEach(_=>{const b=_.filepath.split("/"),C=b.slice(0,-1).slice(b.indexOf("server")+1);let y=null;if(C.forEach(s=>{const m=y?y.routes?.find(g=>g.route===s):i.find(g=>g.route===s);if(m)y=m;else{const g={route:s,filepath:s.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};y?p(y,g):i.push(g),y=g}}),_.type==="runtime"){const s=i.find(m=>m.route==="runtime");if(s)p(s,_);else{const m={route:"runtime",filepath:"runtime",type:"collection",routes:[_]};i.push(m)}}else y?p(y,_):i.push(_)}),i.length===1?i[0].routes??[]:i}),a=v(()=>new Le(n.value||[],{keys:["method","route"],shouldSort:!0})),$=v(()=>n.value?.find(i=>i.route===j.query?.path&&i.method===j.query?.method)),V=L(""),P=v(()=>n.value?V.value?a.value.search(V.value).map(p=>p.item):n.value:[]);return(i,p)=>{const q=$e,_=he,b=Ct,C=Be,y=fe,s=Ae;return o(),c(s,null,{left:h(()=>[x(q,{search:e(V),"onUpdate:search":p[0]||(p[0]=m=>W(V)?V.value=m:null),pb2:""},{default:h(()=>[d("div",xt,[e(V)?(o(),u("span",$t,S(e(P).length)+" matched · ",1)):w("",!0),d("span",Vt,S(e(n)?.length)+" routes in total",1)])]),_:1},8,["search"]),(o(!0),u(U,null,O(e(k),m=>(o(),c(_,{key:m.filepath,item:m},null,8,["item"]))),128))]),right:h(()=>[(o(),c(Ie,{max:10},[e($)?(o(),c(b,{key:e($).filepath,route:e($)},null,8,["route"])):w("",!0)],1024)),e($)?w("",!0):(o(),c(y,{key:0},{default:h(()=>[x(C,{px6:"",py2:""},{default:h(()=>[Tt]),_:1})]),_:1}))]),_:1})}}});export{Ot as default};
